# Description: a lean, small and clean implementation of an ATA S.M.A.R.T. reading and parsing library
# URL: http://0pointer.de/blog/projects/being-smart.html
# Packager: Matt Housh, jaeger at crux dot ninja
# Maintainer: mac-a-r0ni, j at lngn dot net

name=libatasmart
version=0.19
release=2
source=(http://0pointer.de/public/$name-$version.tar.xz 0001-Dont-test-undefined-bits.patch 0002-Drop-our-own-many-bad-sectors-heuristic.patch)

build() {
  cd $name-$version
    patch -Np1 -i $SRC/0001-Dont-test-undefined-bits.patch
    patch -Np1 -i $SRC/0002-Drop-our-own-many-bad-sectors-heuristic.patch
    ./configure --prefix=/usr --build=aarch64-unknown-linux-gnu
    make
    make DESTDIR=$PKG install
    rm -r $PKG/usr/share/doc
}
