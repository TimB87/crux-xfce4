# Description: Secure PinEntry Dialog for GTK
# URL: https://gnupg.org/related_software/pinentry/
# Maintainer: mac-a-r0ni, j at lngn dot net
# Depends on: libassuan libcap util-linux
# Optional: libsecret

name=pinentry-gtk
version=1.2.1
release=1
source=(https://gnupg.org/ftp/gcrypt/$name/pinentry-$version.tar.bz2
  pinentry)

build() {
  cd pinentry-$version

  ./configure \
    --prefix=/usr \
    --disable-pinentry-{curses,qt,qt5} \
    --enable-pinentry-gtk2

  make
  make DESTDIR=$PKG install

  rm -rf $PKG/usr/share
  rm $PKG/usr/bin/pinentry
  install -m 755 $SRC/pinentry $PKG/usr/bin/pinentry
}
