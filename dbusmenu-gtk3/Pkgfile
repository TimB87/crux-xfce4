# Description: A small little library that was created by pulling out some comon code out of indicator-applet
# URL: https://launchpad.net/libdbusmenu
# Maintainer: jolupa, jlpavon at me dot com
# Depends on: gtk3 gnome-common gobject-introspection vala valgrind

name=dbusmenu-gtk3
rname=libdbusmenu
version=16.04.0
release=1
source=(https://launchpad.net/$rname/16.04/$version/+download/$rname-$version.tar.gz)

build() {

  cd $rname-$version

  export HAVE_VALGRIND_TRUE='#'
  export HAVE_VALGRIND_FALSE=''

  ./configure \
    --prefix=/usr \
    --sysconfdir=/etc \
    --disable-dumper \
    --disable-static \
    --disable-test \
    --with-gtk=3

  make
  make DESTDIR=$PKG install

  rm -r $PKG/usr/share/{gtk-doc,doc}

}
