# Description: Screensaver for Xfce
# URL: https://git.xfce.org/apps/xfce4-screensaver/
# Maintainer: jolupa, jlpavon at me dot com
# Depends on: xfce4-dev-tools xorg-libxscrnsaver xfconf libxfce4ui libxfce4util garcon gtk3 libxklavier exo

name=xfce4-screensaver
version=0.1.6
release=4
source=(https://git.xfce.org/apps/$name/snapshot/$name-$version.tar.gz common_auth.patch) 

build() {

  cd $name-$version
  
	patch -p1 -i $SRC/common_auth.patch

  ./autogen.sh \
    --prefix=/usr \
    --libexecdir=/usr/lib/$name \
    --sysconfdir=/etc \
		--enable-pam \
		--enable-authentication-scheme=pam \
		--with-pam-prefix=/etc \
		--with-pam-auth-type=common \
    --disable-static \
    --with-mit-ext \
    --with-console-kit \
    --without-systemd \
		--without-elogind \
    --with-libgl
  
  make
  make DESTDIR=$PKG install

	install -d $PKG/usr/etc
	mv $PKG/etc/xdg $PKG/usr/etc/xdg
	#mv $PKG/usr/share/dbus-1 $PKG/etc  
  #rm -r $PKG/usr/share/locale
  
}
