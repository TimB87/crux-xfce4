# Description: A small little library that was created by pulling out some comon code out of indicator-applet
# URL: https://launchpad.net/libdbusmenu
# Maintainer: jolupa, jlpavon at me dot com
# Depends on: gtk gnome-common gobject-introspection vala

name=dbusmenu-gtk2
rname=libdbusmenu
version=16.04.0
release=2
source=(https://launchpad.net/$rname/16.04/$version/+download/$rname-$version.tar.gz)

build() {

  cd $rname-$version

  export HAVE_VALGRIND_TRUE='#'
  export HAVE_VALGRIND_FALSE=''

  ./configure \
    --prefix=/usr \
    --libexecdir=/usr/lib/$name \
    --sysconfdir=/etc \
    --disable-dumper \
    --disable-static \
    --disable-test \
    --with-gtk=2

  make
  make -j1 -C libdbusmenu-gtk DESTDIR=$PKG install
  make -j1 -C docs/libdbusmenu-gtk DESTDIR=$PKG install
  make DESTDIR=$PKG install

  rm -r $PKG/usr/share/{gtk-doc,doc}

}
